import{d as f,r as b,a as l,c as d,b as a,w as i,e as w,v as u,t as p,f as _,u as g,o as c,s as y,_ as k}from"./index-hxIbAW9c.js";import{r as x}from"./request-BZuMAQw0.js";const V={class:"page"},q=["disabled"],B=["disabled"],L={key:0,class:"error-msg"},M=["disabled"],C=f({__name:"Login",setup(D){const m=g(),s=b({account:"admin",password:"123456"}),o=l(!1),t=l("");async function v(){if(!s.account||!s.password){t.value="请输入账号和密码";return}o.value=!0,t.value="";try{const r=await x.post("/admin/auth/login",{username:s.account,password:s.password});r.token?(y(r.token),m.replace({name:"home"})):t.value="登录失败：未返回token"}catch(r){console.error("登录失败:",r),t.value=r.message||"登录失败，请检查账号密码"}finally{o.value=!1}}return(r,e)=>(c(),d("div",V,[e[5]||(e[5]=a("div",{class:"title"},"核销端",-1)),a("form",{class:"form",onSubmit:_(v,["prevent"])},[e[2]||(e[2]=a("label",{class:"label",for:"account"},"账号",-1)),i(a("input",{id:"account","onUpdate:modelValue":e[0]||(e[0]=n=>s.account=n),class:"input",type:"text",required:"",autocomplete:"username",disabled:o.value},null,8,q),[[u,s.account]]),e[3]||(e[3]=a("label",{class:"label",for:"password"},"密码",-1)),i(a("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=n=>s.password=n),class:"input",type:"password",required:"",autocomplete:"current-password",disabled:o.value},null,8,B),[[u,s.password]]),t.value?(c(),d("div",L,p(t.value),1)):w("",!0),a("button",{class:"primary",type:"submit",disabled:o.value},p(o.value?"登录中...":"登录"),9,M),e[4]||(e[4]=a("div",{class:"tip"},"默认账号：admin / 密码：123456",-1))],32)]))}}),T=k(C,[["__scopeId","data-v-d2a253d0"]]);export{T as default};
