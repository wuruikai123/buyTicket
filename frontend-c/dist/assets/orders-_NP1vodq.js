import{r as n}from"./request-BZuMAQw0.js";async function u(r){if(!r||!r.trim())throw new Error("请输入订单号");try{return await n.post("/order/ticket/verify",{orderNo:r.trim()}),!0}catch(e){throw console.error("核销失败:",e),e}}async function y(){try{return await n.get("/order/ticket/today-count")||0}catch(r){return console.error("获取今日核销数量失败:",r),0}}async function f(r,e,o){try{const a=`${r}-${String(e).padStart(2,"0")}-${String(o).padStart(2,"0")}`;return(await n.get(`/order/ticket/records?date=${a}`)||[]).map(t=>({id:t.id,orderNo:t.orderNo,exhibition:t.exhibitionName||(t.contactName?`${t.contactName}的门票订单`:"门票订单"),validTime:t.ticketDate&&t.timeSlot?`${t.ticketDate} ${t.timeSlot}`:i(t.createTime),buyer:t.contactPhone||t.contactName||"未知",verifyTime:t.verifyTime?i(t.verifyTime):void 0,status:t.status}))}catch(a){return console.error("获取核销记录失败:",a),[]}}function i(r){if(!r)return"";const e=new Date(r),o=e.getFullYear(),a=e.getMonth()+1,c=e.getDate(),t=String(e.getHours()).padStart(2,"0"),s=String(e.getMinutes()).padStart(2,"0");return`${o}年${a}月${c}日 ${t}:${s}`}export{y as g,f as l,u as v};
