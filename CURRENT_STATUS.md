# é¡¹ç›®å½“å‰çŠ¶æ€æ€»ç»“

## âœ… å·²å®Œæˆçš„åŠŸèƒ½

### 1. Docker ç¯å¢ƒé…ç½®
- âœ… æ‰€æœ‰å®¹å™¨æˆåŠŸå¯åŠ¨å¹¶è¿è¡Œ
- âœ… ç«¯å£é…ç½®ï¼š
  - å‰ç«¯Aï¼ˆç”¨æˆ·ç«¯ï¼‰: 3000
  - å‰ç«¯Bï¼ˆç®¡ç†ç«¯ï¼‰: 3001
  - åç«¯API: 8080
  - MySQL: 3307
- âœ… Node.js ç‰ˆæœ¬å‡çº§åˆ° 22ï¼ˆæ”¯æŒ Vite 7ï¼‰
- âœ… Java ç‰ˆæœ¬å‡çº§åˆ° 21

### 2. åç«¯æ¥å£å®ç°
- âœ… ç”¨æˆ·åœ°å€ç®¡ç†ï¼ˆ5ä¸ªæ¥å£ï¼‰
- âœ… ç”¨æˆ·ä¿¡æ¯æ›´æ–°å’Œä¿®æ”¹å¯†ç 
- âœ… é—¨ç¥¨è®¢å•ç®¡ç†ï¼ˆåˆ—è¡¨/è¯¦æƒ…/å–æ¶ˆ/æ ¸é”€ï¼‰
- âœ… å•†åŸè®¢å•ç®¡ç†ï¼ˆåˆ—è¡¨/è¯¦æƒ…/å–æ¶ˆï¼‰
- âœ… Bç«¯è®¢å•ç®¡ç†æ¥å£
- âœ… è½®æ’­å›¾ç®¡ç†æ¥å£ï¼ˆCç«¯å±•ç¤º + Bç«¯CRUDï¼‰

### 3. è½®æ’­å›¾åŠŸèƒ½
- âœ… æ•°æ®åº“è¡¨ `banner` åˆ›å»ºå®Œæˆ
- âœ… Cç«¯é¦–é¡µè½®æ’­å›¾å±•ç¤ºï¼ˆä½¿ç”¨ Element Plus Carouselï¼‰
- âœ… Bç«¯è½®æ’­å›¾ç®¡ç†é¡µé¢ï¼ˆå®Œæ•´CRUDï¼‰
- âœ… è½®æ’­å›¾æ”¯æŒä¸‰ç§é“¾æ¥ç±»å‹ï¼š
  - æ— é“¾æ¥
  - å±•è§ˆè¯¦æƒ…
  - å¤–éƒ¨é“¾æ¥
- âœ… è½®æ’­å›¾å›¾ç‰‡ä½¿ç”¨å±•è§ˆå°é¢å›¾ç‰‡
- âœ… ä¿®å¤äº†é¦–é¡µè½®æ’­å›¾ä¸æ˜¾ç¤ºé—®é¢˜ï¼ˆaxios â†’ requestï¼‰

### 4. è®¢å•å·åŠŸèƒ½
- âœ… æ•°æ®åº“å­—æ®µ `order_no` æ·»åŠ å®Œæˆï¼ˆå¸¦å”¯ä¸€ç´¢å¼•ï¼‰
- âœ… è®¢å•å·è‡ªåŠ¨ç”Ÿæˆé€»è¾‘å®ç°
- âœ… è®¢å•å·æ ¼å¼ï¼š`T + æ—¥æœŸ(yyyyMMdd) + 8ä½ID`
  - ç¤ºä¾‹ï¼š`T2025121100000001`

### 5. æ ¸é”€åŠŸèƒ½ä¼˜åŒ–
- âœ… Cç«¯ç§»é™¤æ‰‹åŠ¨æ ¸é”€åŠŸèƒ½
- âœ… Cç«¯åªæ˜¾ç¤ºè®¢å•çŠ¶æ€æ ‡ç­¾ï¼ˆä¸å¯ç‚¹å‡»ï¼‰
- âœ… Bç«¯é€šè¿‡è®¢å•å·æ ¸é”€åŠŸèƒ½å®ç°
- âœ… æ ¸é”€æ¥å£ï¼š`POST /api/v1/order/ticket/verify`
- âœ… Bç«¯æ ¸é”€ç®¡ç†é¡µé¢å®Œæˆ

---

## ğŸ“‹ æ•°æ®åº“çŠ¶æ€

### å·²åˆ›å»ºçš„è¡¨
1. âœ… `sys_user` - ç”¨æˆ·è¡¨
2. âœ… `exhibition` - å±•è§ˆè¡¨
3. âœ… `ticket_inventory` - ç¥¨åŠ¡åº“å­˜è¡¨
4. âœ… `ticket_order` - é—¨ç¥¨è®¢å•è¡¨ï¼ˆå« order_no å­—æ®µï¼‰
5. âœ… `order_item` - è®¢å•è¯¦æƒ…è¡¨
6. âœ… `sys_product` - æ–‡åˆ›äº§å“è¡¨
7. âœ… `cart_item` - è´­ç‰©è½¦è¡¨
8. âœ… `mall_order` - å•†åŸè®¢å•è¡¨
9. âœ… `mall_order_item` - å•†åŸè®¢å•è¯¦æƒ…è¡¨
10. âœ… `admin_user` - ç®¡ç†å‘˜è¡¨
11. âœ… `user_address` - ç”¨æˆ·åœ°å€è¡¨
12. âœ… `banner` - è½®æ’­å›¾è¡¨

### æ•°æ®åº“æ›´æ–°è„šæœ¬
- âœ… `schema.sql` - ä¸»è¡¨ç»“æ„ï¼ˆå·²åŒ…å« order_no å­—æ®µï¼‰
- âœ… `add_order_no.sql` - ä¸ºç°æœ‰è®¢å•ç”Ÿæˆè®¢å•å·çš„è„šæœ¬
- âœ… `update_banner.sql` - è½®æ’­å›¾æ•°æ®æ›´æ–°è„šæœ¬

---

## ğŸ¯ éœ€è¦æ‰§è¡Œçš„æ“ä½œ

### å¦‚æœæ˜¯å…¨æ–°éƒ¨ç½²
```bash
# ç›´æ¥å¯åŠ¨ Dockerï¼Œä¼šè‡ªåŠ¨åˆå§‹åŒ–æ•°æ®åº“
docker-compose up -d
```

### å¦‚æœæ˜¯ç°æœ‰æ•°æ®åº“éœ€è¦æ›´æ–°
éœ€è¦æ‰§è¡Œä»¥ä¸‹ SQL è„šæœ¬ä¸ºç°æœ‰è®¢å•ç”Ÿæˆè®¢å•å·ï¼š

```sql
-- æ–¹å¼1ï¼šè¿›å…¥ MySQL å®¹å™¨æ‰§è¡Œ
docker exec -it buyticket-mysql mysql -uroot -proot123 buy_ticket

-- ç„¶åæ‰§è¡Œ
source /docker-entrypoint-initdb.d/add_order_no.sql;

-- æˆ–è€…æ–¹å¼2ï¼šç›´æ¥æ‰§è¡Œ SQL
UPDATE `ticket_order` 
SET `order_no` = CONCAT('T', DATE_FORMAT(create_time, '%Y%m%d'), LPAD(id, 8, '0')) 
WHERE `order_no` IS NULL OR `order_no` = '';
```

---

## ğŸ” æµ‹è¯•æ¸…å•

### 1. è½®æ’­å›¾æµ‹è¯•
- [ ] è®¿é—® http://localhost:3000 æŸ¥çœ‹é¦–é¡µè½®æ’­å›¾
- [ ] æ£€æŸ¥è½®æ’­å›¾æ˜¯å¦è‡ªåŠ¨åˆ‡æ¢
- [ ] ç‚¹å‡»è½®æ’­å›¾ï¼Œæ£€æŸ¥æ˜¯å¦è·³è½¬åˆ°å¯¹åº”å±•è§ˆ
- [ ] è®¿é—® http://localhost:3001 Bç«¯ç®¡ç†è½®æ’­å›¾
- [ ] æµ‹è¯•æ·»åŠ /ç¼–è¾‘/åˆ é™¤è½®æ’­å›¾

### 2. è®¢å•å·æµ‹è¯•
- [ ] åˆ›å»ºæ–°çš„é—¨ç¥¨è®¢å•
- [ ] æ£€æŸ¥è®¢å•å·æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼ˆT + æ—¥æœŸ + IDï¼‰
- [ ] æ£€æŸ¥è®¢å•å·æ˜¯å¦å”¯ä¸€
- [ ] åœ¨è®¢å•åˆ—è¡¨ä¸­æŸ¥çœ‹è®¢å•å·

### 3. æ ¸é”€åŠŸèƒ½æµ‹è¯•

#### Cç«¯æµ‹è¯•
- [ ] ç™»å½•ç”¨æˆ·ç«¯ http://localhost:3000
- [ ] æŸ¥çœ‹"æˆ‘çš„é—¨ç¥¨è®¢å•"
- [ ] ç¡®è®¤åªæ˜¾ç¤ºçŠ¶æ€æ ‡ç­¾ï¼Œæ— æ ¸é”€æŒ‰é’®
- [ ] è®°å½•ä¸€ä¸ª"å¾…ä½¿ç”¨"çŠ¶æ€çš„è®¢å•å·

#### Bç«¯æµ‹è¯•
- [ ] ç™»å½•ç®¡ç†ç«¯ http://localhost:3001
- [ ] è¿›å…¥"é—¨ç¥¨ç®¡ç†" -> "è®¢å•æ ¸é”€"
- [ ] è¾“å…¥æ­£ç¡®çš„è®¢å•å·ï¼Œç‚¹å‡»"æ ¸é”€è®¢å•"
- [ ] ç¡®è®¤æ ¸é”€æˆåŠŸæç¤º
- [ ] è¿”å›Cç«¯ï¼Œç¡®è®¤è®¢å•çŠ¶æ€å˜ä¸º"å·²ä½¿ç”¨"

#### å¼‚å¸¸æƒ…å†µæµ‹è¯•
- [ ] è¾“å…¥ä¸å­˜åœ¨çš„è®¢å•å· â†’ æç¤º"è®¢å•ä¸å­˜åœ¨"
- [ ] è¾“å…¥å·²æ ¸é”€çš„è®¢å•å· â†’ æç¤º"åªæœ‰å¾…ä½¿ç”¨çš„è®¢å•æ‰èƒ½æ ¸é”€"
- [ ] è¾“å…¥ç©ºè®¢å•å· â†’ æç¤º"è¯·è¾“å…¥è®¢å•å·"

---

## ğŸ“ å…³é”®æ–‡ä»¶è·¯å¾„

### åç«¯æ–‡ä»¶
```
shared-backend/src/main/java/com/buyticket/
â”œâ”€â”€ entity/
â”‚   â”œâ”€â”€ TicketOrder.java (è®¢å•å®ä½“ï¼Œå« orderNo å­—æ®µ)
â”‚   â”œâ”€â”€ Banner.java (è½®æ’­å›¾å®ä½“)
â”‚   â””â”€â”€ UserAddress.java (ç”¨æˆ·åœ°å€å®ä½“)
â”œâ”€â”€ service/impl/
â”‚   â”œâ”€â”€ TicketOrderServiceImpl.java (è®¢å•å·ç”Ÿæˆé€»è¾‘)
â”‚   â””â”€â”€ BannerServiceImpl.java (è½®æ’­å›¾æœåŠ¡)
â””â”€â”€ controller/
    â”œâ”€â”€ OrderController.java (è®¢å•å·æ ¸é”€æ¥å£)
    â”œâ”€â”€ BannerController.java (Cç«¯è½®æ’­å›¾æ¥å£)
    â””â”€â”€ admin/
        â”œâ”€â”€ AdminOrderController.java (Bç«¯è®¢å•ç®¡ç†)
        â””â”€â”€ AdminBannerController.java (Bç«¯è½®æ’­å›¾ç®¡ç†)

shared-backend/src/main/resources/sql/
â”œâ”€â”€ schema.sql (ä¸»è¡¨ç»“æ„)
â”œâ”€â”€ add_order_no.sql (è®¢å•å·æ›´æ–°è„šæœ¬)
â””â”€â”€ update_banner.sql (è½®æ’­å›¾æ•°æ®)
```

### å‰ç«¯æ–‡ä»¶
```
frontend-a/src/views/
â”œâ”€â”€ Home.vue (é¦–é¡µè½®æ’­å›¾)
â””â”€â”€ Profile.vue (è®¢å•åˆ—è¡¨ï¼Œåªæ˜¾ç¤ºçŠ¶æ€)

frontend-b/src/views/
â”œâ”€â”€ banner/
â”‚   â””â”€â”€ BannerList.vue (è½®æ’­å›¾ç®¡ç†)
â””â”€â”€ order/
    â””â”€â”€ VerificationList.vue (è®¢å•æ ¸é”€ç®¡ç†)
```

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨æŒ‡å—

### 1. å¯åŠ¨é¡¹ç›®
```bash
# Windows
start.bat

# Linux/Mac
./start.sh
```

### 2. è®¿é—®åœ°å€
- ç”¨æˆ·ç«¯ï¼šhttp://localhost:3000
- ç®¡ç†ç«¯ï¼šhttp://localhost:3001
- åç«¯APIï¼šhttp://localhost:8080

### 3. é»˜è®¤è´¦å·
- ç®¡ç†å‘˜ï¼šadmin / 123456
- æµ‹è¯•ç”¨æˆ·ï¼šzhangsan / 123456

---

## ğŸ“ æ¥å£æ–‡æ¡£

### æ ¸é”€ç›¸å…³æ¥å£

#### 1. é€šè¿‡è®¢å•å·æ ¸é”€ï¼ˆæ–°å¢ï¼‰
```
POST /api/v1/order/ticket/verify
Content-Type: application/json

è¯·æ±‚ä½“ï¼š
{
  "orderNo": "T2025121100000001"
}

æˆåŠŸå“åº”ï¼š
{
  "code": 0,
  "msg": "æ ¸é”€æˆåŠŸ",
  "data": null
}

é”™è¯¯å“åº”ï¼š
{
  "code": -1,
  "msg": "è®¢å•ä¸å­˜åœ¨" | "åªæœ‰å¾…ä½¿ç”¨çš„è®¢å•æ‰èƒ½æ ¸é”€" | "è¯·è¾“å…¥è®¢å•å·",
  "data": null
}
```

#### 2. è·å–é—¨ç¥¨è®¢å•åˆ—è¡¨
```
GET /api/v1/order/ticket/list

å“åº”ï¼š
{
  "code": 0,
  "msg": "success",
  "data": [
    {
      "id": 1,
      "orderNo": "T2025121100000001",
      "exhibitionName": "å°è±¡æ´¾ç”»å±•",
      "contactName": "å¼ ä¸‰",
      "contactPhone": "13800138000",
      "totalAmount": 100.00,
      "status": 1,
      "createTime": "2025-12-11 10:00:00"
    }
  ]
}
```

### è½®æ’­å›¾ç›¸å…³æ¥å£

#### 1. Cç«¯è·å–è½®æ’­å›¾åˆ—è¡¨
```
GET /api/v1/banner/list

å“åº”ï¼š
{
  "code": 0,
  "msg": "success",
  "data": [
    {
      "id": 1,
      "title": "2025å¹´å½“ä»£è‰ºæœ¯åŒå¹´å±•",
      "imageUrl": "/images/exhibition_current.jpg",
      "linkType": 1,
      "linkId": 1,
      "sortOrder": 1
    }
  ]
}
```

#### 2. Bç«¯è½®æ’­å›¾ç®¡ç†
```
GET /api/v1/admin/banner/list - è·å–åˆ—è¡¨
POST /api/v1/admin/banner/create - åˆ›å»º
POST /api/v1/admin/banner/update - æ›´æ–°
DELETE /api/v1/admin/banner/{id} - åˆ é™¤
POST /api/v1/admin/banner/{id}/status/{status} - æ›´æ–°çŠ¶æ€
```

---

## ğŸ¨ è®¢å•çŠ¶æ€è¯´æ˜

### é—¨ç¥¨è®¢å•çŠ¶æ€
- `0` - å¾…æ”¯ä»˜ï¼ˆç°è‰²æ ‡ç­¾ï¼‰
- `1` - å¾…ä½¿ç”¨ï¼ˆç»¿è‰²æ ‡ç­¾ï¼‰
- `2` - å·²ä½¿ç”¨ï¼ˆè“è‰²æ ‡ç­¾ï¼‰
- `3` - å·²å–æ¶ˆï¼ˆçº¢è‰²æ ‡ç­¾ï¼‰

### å•†åŸè®¢å•çŠ¶æ€
- `0` - å¾…æ”¯ä»˜
- `1` - å¾…å‘è´§
- `2` - å·²å‘è´§
- `3` - å·²å®Œæˆ
- `4` - å·²å–æ¶ˆ

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **è®¢å•å·å”¯ä¸€æ€§**ï¼šè®¢å•å·ç”±æ—¥æœŸ+IDç»„æˆï¼Œç¡®ä¿å…¨å±€å”¯ä¸€
2. **æ ¸é”€æƒé™**ï¼šåªæœ‰Bç«¯ç®¡ç†å‘˜å¯ä»¥æ ¸é”€è®¢å•
3. **çŠ¶æ€éªŒè¯**ï¼šåªæœ‰"å¾…ä½¿ç”¨"ï¼ˆstatus=1ï¼‰çš„è®¢å•å¯ä»¥æ ¸é”€
4. **ä¸å¯æ’¤é”€**ï¼šæ ¸é”€åæ— æ³•æ’¤é”€ï¼Œéœ€è¦è°¨æ…æ“ä½œ
5. **è½®æ’­å›¾å›¾ç‰‡**ï¼šä½¿ç”¨å±•è§ˆçš„å°é¢å›¾ç‰‡ï¼Œç¡®ä¿å›¾ç‰‡è·¯å¾„æ­£ç¡®
6. **æ•°æ®è¿ç§»**ï¼šå¦‚æœæœ‰ç°æœ‰è®¢å•ï¼Œéœ€è¦æ‰§è¡Œ `add_order_no.sql` è„šæœ¬

---

## ğŸ”„ ä¸‹ä¸€æ­¥å»ºè®®

1. **æµ‹è¯•æ‰€æœ‰åŠŸèƒ½**ï¼šæŒ‰ç…§æµ‹è¯•æ¸…å•é€é¡¹æµ‹è¯•
2. **æ•°æ®å¤‡ä»½**ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å‰å¤‡ä»½æ•°æ®åº“
3. **æ€§èƒ½ä¼˜åŒ–**ï¼šå¦‚æœè®¢å•é‡å¤§ï¼Œè€ƒè™‘ä¸º order_no æ·»åŠ ç´¢å¼•ï¼ˆå·²æ·»åŠ ï¼‰
4. **æ—¥å¿—è®°å½•**ï¼šæ·»åŠ æ ¸é”€æ“ä½œæ—¥å¿—ï¼Œè®°å½•æ“ä½œäººå’Œæ—¶é—´
5. **æƒé™æ§åˆ¶**ï¼šå®Œå–„Bç«¯ç®¡ç†å‘˜æƒé™éªŒè¯

---

## ğŸ“ é—®é¢˜æ’æŸ¥

### è½®æ’­å›¾ä¸æ˜¾ç¤º
- æ£€æŸ¥åç«¯æ¥å£æ˜¯å¦æ­£å¸¸ï¼šhttp://localhost:8080/api/v1/banner/list
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
- ç¡®è®¤ banner è¡¨ä¸­æœ‰æ•°æ®

### è®¢å•å·ä¸ºç©º
- æ£€æŸ¥æ•°æ®åº“ ticket_order è¡¨çš„ order_no å­—æ®µ
- æ‰§è¡Œ add_order_no.sql è„šæœ¬æ›´æ–°ç°æœ‰è®¢å•
- åˆ›å»ºæ–°è®¢å•æµ‹è¯•è®¢å•å·ç”Ÿæˆ

### æ ¸é”€å¤±è´¥
- ç¡®è®¤è®¢å•çŠ¶æ€ä¸º"å¾…ä½¿ç”¨"ï¼ˆstatus=1ï¼‰
- æ£€æŸ¥è®¢å•å·æ˜¯å¦æ­£ç¡®
- æŸ¥çœ‹åç«¯æ—¥å¿—æ’æŸ¥é”™è¯¯

---

**æ‰€æœ‰åŠŸèƒ½å·²å®ç°å¹¶å‡†å¤‡å°±ç»ªï¼** ğŸ‰
