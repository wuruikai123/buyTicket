# å•åŸŸåéƒ¨ç½² - é…ç½®ä¿®æ”¹æ¸…å•

## âœ… å·²å®Œæˆçš„ä¿®æ”¹

ä»¥ä¸‹æ–‡ä»¶å·²ç»è‡ªåŠ¨ä¿®æ”¹å®Œæˆï¼Œæ”¯æŒå•åŸŸåéƒ¨ç½²ã€‚

---

## ğŸ“ Frontend-A (ç”¨æˆ·ç«¯)

### 1. `frontend-a/vite.config.ts`

**ä¿®æ”¹å†…å®¹**ï¼š
- âœ… æ·»åŠ  `base: '/'` - ç”¨æˆ·ç«¯åœ¨æ ¹è·¯å¾„
- âœ… æ·»åŠ  `build` é…ç½® - ä¼˜åŒ–æ„å»ºè¾“å‡º

**å…³é”®é…ç½®**ï¼š
```typescript
export default defineConfig({
  base: '/',  // æ ¹è·¯å¾„
  server: {
    port: 5173
  },
  build: {
    outDir: 'dist',
    assetsDir: 'assets',
    sourcemap: false,
    chunkSizeWarningLimit: 1500
  }
})
```

### 2. `frontend-a/src/utils/request.ts`

**ä¿®æ”¹å†…å®¹**ï¼š
- âœ… ä¿æŒ `baseURL: '/api/v1'` - ä½¿ç”¨ç›¸å¯¹è·¯å¾„

**å…³é”®é…ç½®**ï¼š
```typescript
const request = axios.create({
    baseURL: '/api/v1',  // ç›¸å¯¹è·¯å¾„ï¼Œé€šè¿‡ Nginx ä»£ç†
    timeout: 5000
})
```

### 3. `frontend-a/src/router/index.ts`

**ä¿®æ”¹å†…å®¹**ï¼š
- âœ… å·²ä½¿ç”¨ `createWebHistory(import.meta.env.BASE_URL)` - è‡ªåŠ¨ä½¿ç”¨ base è·¯å¾„

---

## ğŸ“ Frontend-B (ç®¡ç†ç«¯)

### 1. `frontend-b/vite.config.ts`

**ä¿®æ”¹å†…å®¹**ï¼š
- âœ… æ·»åŠ  `base: '/admin/'` - ç®¡ç†ç«¯åœ¨ /admin/ è·¯å¾„
- âœ… ä¿®æ”¹ç«¯å£ä¸º `5174`
- âœ… æ·»åŠ  `build` é…ç½®

**å…³é”®é…ç½®**ï¼š
```typescript
export default defineConfig({
  base: '/admin/',  // ç®¡ç†ç«¯è·¯å¾„
  server: {
    port: 3001
  },
  build: {
    outDir: 'dist',
    assetsDir: 'assets',
    sourcemap: false
  }
})
```

### 2. `frontend-b/src/utils/request.ts`

**ä¿®æ”¹å†…å®¹**ï¼š
- âœ… ä¿®æ”¹ `baseURL: '/api/v1'` - ä»ç©ºå­—ç¬¦ä¸²æ”¹ä¸ºç›¸å¯¹è·¯å¾„

**å…³é”®é…ç½®**ï¼š
```typescript
const request = axios.create({
  baseURL: '/api/v1',  // ç›¸å¯¹è·¯å¾„ï¼Œé€šè¿‡ Nginx ä»£ç†
  timeout: 10000
})
```

### 3. `frontend-b/src/router/index.ts`

**ä¿®æ”¹å†…å®¹**ï¼š
- âœ… ä¿®æ”¹ä¸º `createWebHistory(import.meta.env.BASE_URL)` - ä½¿ç”¨ base è·¯å¾„

**å…³é”®é…ç½®**ï¼š
```typescript
const router = createRouter({
  history: createWebHistory(import.meta.env.BASE_URL),  // ä½¿ç”¨ base è·¯å¾„
  routes
})
```

---

## ğŸ“ Frontend-C (æ ¸é”€ç«¯)

### 1. `frontend-c/vite.config.ts`

**ä¿®æ”¹å†…å®¹**ï¼š
- âœ… æ·»åŠ  `base: '/verify/'` - æ ¸é”€ç«¯åœ¨ /verify/ è·¯å¾„
- âœ… ä¿®æ”¹ç«¯å£ä¸º `5174`
- âœ… æ·»åŠ  `build` é…ç½®

**å…³é”®é…ç½®**ï¼š
```typescript
export default defineConfig({
  base: '/verify/',  // æ ¸é”€ç«¯è·¯å¾„
  server: {
    port: 5174
  },
  build: {
    outDir: 'dist',
    assetsDir: 'assets',
    sourcemap: false
  }
})
```

### 2. `frontend-c/src/utils/request.ts`

**ä¿®æ”¹å†…å®¹**ï¼š
- âœ… ä¿æŒ `baseURL: '/api/v1/admin'` - ä½¿ç”¨ç›¸å¯¹è·¯å¾„

**å…³é”®é…ç½®**ï¼š
```typescript
const request = axios.create({
  baseURL: '/api/v1/admin',  // ç›¸å¯¹è·¯å¾„ï¼Œé€šè¿‡ Nginx ä»£ç†
  timeout: 10000
})
```

### 3. `frontend-c/src/router/index.ts`

**ä¿®æ”¹å†…å®¹**ï¼š
- âœ… ä¿®æ”¹ä¸º `createWebHistory(import.meta.env.BASE_URL)` - ä½¿ç”¨ base è·¯å¾„

**å…³é”®é…ç½®**ï¼š
```typescript
export function createRouter() {
  const router = createVueRouter({
    history: createWebHistory(import.meta.env.BASE_URL),  // ä½¿ç”¨ base è·¯å¾„
    routes
  })
}
```

---

## ğŸ“Š ä¿®æ”¹æ€»ç»“

| é¡¹ç›® | ä¿®æ”¹æ–‡ä»¶æ•° | ä¸»è¦ä¿®æ”¹ |
|------|-----------|----------|
| Frontend-A | 2 ä¸ª | vite.config.ts, router/index.ts |
| Frontend-B | 3 ä¸ª | vite.config.ts, request.ts, router/index.ts |
| Frontend-C | 3 ä¸ª | vite.config.ts, request.ts, router/index.ts |
| **æ€»è®¡** | **8 ä¸ª** | - |

---

## ğŸ¯ é…ç½®å¯¹ç…§è¡¨

| é¡¹ç›® | Base è·¯å¾„ | API Base URL | å¼€å‘ç«¯å£ | ç”Ÿäº§è·¯å¾„ |
|------|-----------|--------------|----------|----------|
| Frontend-A | `/` | `/api/v1` | 5173 | `https://åŸŸå/` |
| Frontend-B | `/admin/` | `/api/v1` | 3001 | `https://åŸŸå/admin/` |
| Frontend-C | `/verify/` | `/api/v1/admin` | 5174 | `https://åŸŸå/verify/` |
| Backend | - | - | 8080 | `https://åŸŸå/api/` |

---

## âœ¨ å…³é”®ç‰¹æ€§

### 1. è·¯å¾„è‡ªåŠ¨å¤„ç†
- âœ… æ‰€æœ‰é™æ€èµ„æºï¼ˆJSã€CSSã€å›¾ç‰‡ï¼‰ä¼šè‡ªåŠ¨åŠ ä¸Š base è·¯å¾„
- âœ… Vue Router ä¼šè‡ªåŠ¨ä½¿ç”¨ base è·¯å¾„
- âœ… æ— éœ€æ‰‹åŠ¨ä¿®æ”¹è·¯ç”±è·¯å¾„

### 2. API è¯·æ±‚å¤„ç†
- âœ… ä½¿ç”¨ç›¸å¯¹è·¯å¾„ `/api/v1`
- âœ… é€šè¿‡ Nginx åå‘ä»£ç†åˆ°åç«¯
- âœ… æ— è·¨åŸŸé—®é¢˜

### 3. å¼€å‘ç¯å¢ƒå…¼å®¹
- âœ… å¼€å‘ç¯å¢ƒä»ç„¶å¯ä»¥æ­£å¸¸è¿è¡Œ
- âœ… Vite ä»£ç†é…ç½®ä¿æŒä¸å˜
- âœ… çƒ­æ›´æ–°æ­£å¸¸å·¥ä½œ

---

## ğŸ” éªŒè¯æ–¹æ³•

### å¼€å‘ç¯å¢ƒæµ‹è¯•

```bash
# å¯åŠ¨ Frontend-A
cd frontend-a
npm run dev
# è®¿é—®: http://localhost:5173/

# å¯åŠ¨ Frontend-B
cd frontend-b
npm run dev
# è®¿é—®: http://localhost:3001/admin/

# å¯åŠ¨ Frontend-C
cd frontend-c
npm run dev
# è®¿é—®: http://localhost:5174/verify/
```

### ç”Ÿäº§ç¯å¢ƒæµ‹è¯•

```bash
# æ„å»ºæ‰€æœ‰å‰ç«¯
cd frontend-a && npm run build
cd ../frontend-b && npm run build
cd ../frontend-c && npm run build

# æ£€æŸ¥æ„å»ºè¾“å‡º
# frontend-a/dist/index.html - èµ„æºè·¯å¾„åº”è¯¥æ˜¯ /assets/...
# frontend-b/dist/index.html - èµ„æºè·¯å¾„åº”è¯¥æ˜¯ /admin/assets/...
# frontend-c/dist/index.html - èµ„æºè·¯å¾„åº”è¯¥æ˜¯ /verify/assets/...
```

---

## ğŸ“ æ³¨æ„äº‹é¡¹

### 1. æ„å»ºå‰å¿…é¡»ç¡®è®¤
- âœ… `vite.config.ts` ä¸­çš„ `base` è·¯å¾„æ­£ç¡®
- âœ… `router/index.ts` ä½¿ç”¨äº† `import.meta.env.BASE_URL`
- âœ… `request.ts` ä½¿ç”¨äº†ç›¸å¯¹è·¯å¾„

### 2. éƒ¨ç½²æ—¶å¿…é¡»ç¡®è®¤
- âœ… Nginx é…ç½®çš„ `location` ä¸ `base` è·¯å¾„ä¸€è‡´
- âœ… æ–‡ä»¶ä¸Šä¼ åˆ°æ­£ç¡®çš„ç›®å½•
- âœ… åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ

### 3. æµ‹è¯•æ—¶å¿…é¡»ç¡®è®¤
- âœ… é¡µé¢å¯ä»¥æ­£å¸¸è®¿é—®
- âœ… é™æ€èµ„æºåŠ è½½æ­£å¸¸
- âœ… API è¯·æ±‚æ­£å¸¸
- âœ… é¡µé¢åˆ·æ–°ä¸ä¼š 404

---

## ğŸ‰ å®ŒæˆçŠ¶æ€

- âœ… æ‰€æœ‰é…ç½®æ–‡ä»¶å·²ä¿®æ”¹å®Œæˆ
- âœ… æ”¯æŒå•åŸŸåéƒ¨ç½²
- âœ… å¼€å‘ç¯å¢ƒå…¼å®¹
- âœ… ç”Ÿäº§ç¯å¢ƒå°±ç»ª

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- ğŸ“˜ `å•åŸŸåéƒ¨ç½²æ“ä½œæŒ‡å—.md` - å®Œæ•´éƒ¨ç½²æ­¥éª¤
- ğŸ“— `éƒ¨ç½²å¿«é€Ÿå‚è€ƒ.md` - å¿«é€Ÿå‚è€ƒå¡
- ğŸ“• `SINGLE_DOMAIN_DEPLOYMENT.md` - æŠ€æœ¯è¯¦ç»†è¯´æ˜
- ğŸ“™ `å®å¡”é¢æ¿éƒ¨ç½²å®Œæ•´æŒ‡å—.md` - å®å¡”é¢æ¿ä½¿ç”¨æŒ‡å—

---

## ğŸš€ ä¸‹ä¸€æ­¥

ç°åœ¨ä½ å¯ä»¥ï¼š

1. **æ„å»ºé¡¹ç›®**ï¼šè¿è¡Œ `npm run build` æ„å»ºæ‰€æœ‰å‰ç«¯
2. **ä¸Šä¼ æ–‡ä»¶**ï¼šä¸Šä¼ åˆ°æœåŠ¡å™¨å¯¹åº”ç›®å½•
3. **é…ç½® Nginx**ï¼šä½¿ç”¨æä¾›çš„é…ç½®æ¨¡æ¿
4. **æµ‹è¯•éªŒè¯**ï¼šè®¿é—®å„ä¸ªç«¯ç‚¹è¿›è¡Œæµ‹è¯•

ç¥ä½ éƒ¨ç½²æˆåŠŸï¼ğŸŠ
