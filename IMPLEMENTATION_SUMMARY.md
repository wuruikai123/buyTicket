# åç«¯æ¥å£å®ç°æ€»ç»“

## âœ… å·²å®Œæˆçš„æ¥å£å®ç°

### ä¸€ã€ç”¨æˆ·åœ°å€ç®¡ç†ï¼ˆ5ä¸ªæ¥å£ï¼‰

| æ¥å£ | æ–¹æ³• | è·¯å¾„ | çŠ¶æ€ |
|------|------|------|------|
| è·å–åœ°å€åˆ—è¡¨ | GET | `/api/v1/user/address/list` | âœ… |
| æ·»åŠ åœ°å€ | POST | `/api/v1/user/address/add` | âœ… |
| æ›´æ–°åœ°å€ | PUT | `/api/v1/user/address/update` | âœ… |
| åˆ é™¤åœ°å€ | DELETE | `/api/v1/user/address/{id}` | âœ… |
| è®¾ç½®é»˜è®¤åœ°å€ | PUT | `/api/v1/user/address/{id}/default` | âœ… |

**å®ç°æ–‡ä»¶**: `UserController.java`
**æ•°æ®åº“è¡¨**: `user_address` (å·²æ·»åŠ åˆ° schema.sql)

---

### äºŒã€ç”¨æˆ·ä¿¡æ¯ç®¡ç†ï¼ˆ2ä¸ªæ¥å£ï¼‰

| æ¥å£ | æ–¹æ³• | è·¯å¾„ | çŠ¶æ€ |
|------|------|------|------|
| æ›´æ–°ç”¨æˆ·ä¿¡æ¯ | PUT | `/api/v1/user/update` | âœ… |
| ä¿®æ”¹å¯†ç  | PUT | `/api/v1/user/password` | âœ… |

**å®ç°æ–‡ä»¶**: `UserController.java`

---

### ä¸‰ã€Cç«¯é—¨ç¥¨è®¢å•ï¼ˆ4ä¸ªæ¥å£ï¼‰

| æ¥å£ | æ–¹æ³• | è·¯å¾„ | çŠ¶æ€ |
|------|------|------|------|
| è·å–è®¢å•åˆ—è¡¨ | GET | `/api/v1/order/ticket/list` | âœ… |
| è·å–è®¢å•è¯¦æƒ… | GET | `/api/v1/order/ticket/{id}` | âœ… |
| å–æ¶ˆè®¢å• | PUT | `/api/v1/order/ticket/{id}/cancel` | âœ… |
| æ ¸é”€è®¢å• | PUT | `/api/v1/order/ticket/{id}/verify` | âœ… |

**å®ç°æ–‡ä»¶**: `OrderController.java`

---

### å››ã€Cç«¯å•†åŸè®¢å•ï¼ˆ4ä¸ªæ¥å£ï¼‰

| æ¥å£ | æ–¹æ³• | è·¯å¾„ | çŠ¶æ€ |
|------|------|------|------|
| åˆ›å»ºè®¢å• | POST | `/api/v1/order/mall/create` | âœ… |
| è·å–è®¢å•åˆ—è¡¨ | GET | `/api/v1/order/mall/list` | âœ… |
| è·å–è®¢å•è¯¦æƒ… | GET | `/api/v1/order/mall/{id}` | âœ… |
| å–æ¶ˆè®¢å• | PUT | `/api/v1/order/mall/{id}/cancel` | âœ… |

**å®ç°æ–‡ä»¶**: `OrderController.java`

---

### äº”ã€æ”¯ä»˜æ¥å£ï¼ˆ1ä¸ªæ¥å£ï¼‰

| æ¥å£ | æ–¹æ³• | è·¯å¾„ | çŠ¶æ€ |
|------|------|------|------|
| ç»Ÿä¸€æ”¯ä»˜ | POST | `/api/v1/order/pay` | âœ… |

**å®ç°æ–‡ä»¶**: `OrderController.java`
**è¯´æ˜**: ä½¿ç”¨ä½™é¢æ”¯ä»˜ï¼ŒéªŒè¯æ”¯ä»˜å¯†ç ï¼ˆé»˜è®¤ï¼š123456ï¼‰

---

### å…­ã€Bç«¯é—¨ç¥¨è®¢å•ç®¡ç†ï¼ˆ4ä¸ªæ¥å£ï¼‰

| æ¥å£ | æ–¹æ³• | è·¯å¾„ | çŠ¶æ€ |
|------|------|------|------|
| è®¢å•åˆ—è¡¨ | GET | `/api/v1/admin/order/ticket/list` | âœ… |
| è®¢å•è¯¦æƒ… | GET | `/api/v1/admin/order/ticket/{id}` | âœ… |
| å–æ¶ˆè®¢å• | PUT | `/api/v1/admin/order/ticket/{id}/cancel` | âœ… |
| æ ¸é”€è®¢å• | PUT | `/api/v1/admin/order/ticket/{id}/verify` | âœ… |

**å®ç°æ–‡ä»¶**: `AdminOrderController.java`

---

### ä¸ƒã€Bç«¯å•†åŸè®¢å•ç®¡ç†ï¼ˆ5ä¸ªæ¥å£ï¼‰

| æ¥å£ | æ–¹æ³• | è·¯å¾„ | çŠ¶æ€ |
|------|------|------|------|
| è®¢å•åˆ—è¡¨ | GET | `/api/v1/admin/order/mall/list` | âœ… |
| è®¢å•è¯¦æƒ… | GET | `/api/v1/admin/order/mall/{id}` | âœ… |
| å–æ¶ˆè®¢å• | PUT | `/api/v1/admin/order/mall/{id}/cancel` | âœ… |
| å‘è´§ | PUT | `/api/v1/admin/order/mall/{id}/ship` | âœ… |
| å®Œæˆè®¢å• | PUT | `/api/v1/admin/order/mall/{id}/complete` | âœ… |

**å®ç°æ–‡ä»¶**: `AdminOrderController.java`

---

## ğŸ“Š å®ç°ç»Ÿè®¡

- **æ€»è®¡å®ç°æ¥å£**: 25ä¸ª
- **æ–°å¢å®ä½“ç±»**: 1ä¸ª (UserAddress)
- **æ–°å¢Mapper**: 1ä¸ª (UserAddressMapper)
- **æ–°å¢Service**: 1ä¸ª (UserAddressService)
- **æ–°å¢æ•°æ®åº“è¡¨**: 1ä¸ª (user_address)
- **ä¿®æ”¹Controller**: 3ä¸ª (UserController, OrderController, AdminOrderController)

---

## ğŸ”— å‰åç«¯è¿æ¥çŠ¶æ€

### Cç«¯ï¼ˆfrontend-aï¼‰

| åŠŸèƒ½æ¨¡å— | APIæ–‡ä»¶ | åç«¯æ¥å£ | çŠ¶æ€ |
|---------|---------|---------|------|
| ç”¨æˆ·åœ°å€ | `user.ts` | UserController | âœ… å·²è¿æ¥ |
| ç”¨æˆ·ä¿¡æ¯ | `user.ts` | UserController | âœ… å·²è¿æ¥ |
| é—¨ç¥¨è®¢å• | `ticket.ts` | OrderController | âœ… å·²è¿æ¥ |
| å•†åŸè®¢å• | `mall.ts` | OrderController | âœ… å·²è¿æ¥ |
| æ”¯ä»˜åŠŸèƒ½ | `ticket.ts`, `mall.ts` | OrderController | âœ… å·²è¿æ¥ |

### Bç«¯ï¼ˆfrontend-bï¼‰

| åŠŸèƒ½æ¨¡å— | APIæ–‡ä»¶ | åç«¯æ¥å£ | çŠ¶æ€ |
|---------|---------|---------|------|
| é—¨ç¥¨è®¢å•ç®¡ç† | `order.ts` | AdminOrderController | âœ… å·²è¿æ¥ |
| å•†åŸè®¢å•ç®¡ç† | `order.ts` | AdminOrderController | âœ… å·²è¿æ¥ |
| åº“å­˜ç®¡ç† | `ticket.ts` | AdminTicketInventoryController | âœ… å·²è¿æ¥ |

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½éªŒè¯

### Cç«¯æ ¸é”€åŠŸèƒ½æµç¨‹
1. âœ… ç”¨æˆ·åœ¨ä¸ªäººä¸­å¿ƒæŸ¥çœ‹è®¢å•åˆ—è¡¨
2. âœ… ç‚¹å‡»"å¾…ä½¿ç”¨"çŠ¶æ€çš„è®¢å•
3. âœ… è°ƒç”¨ `PUT /api/v1/order/ticket/{id}/verify`
4. âœ… åç«¯éªŒè¯è®¢å•çŠ¶æ€ï¼ˆå¿…é¡»æ˜¯status=1ï¼‰
5. âœ… æ›´æ–°è®¢å•çŠ¶æ€ä¸º2ï¼ˆå·²ä½¿ç”¨ï¼‰
6. âœ… å‰ç«¯æ›´æ–°ç•Œé¢æ˜¾ç¤º

### Bç«¯è®¢å•ç®¡ç†æµç¨‹
1. âœ… ç®¡ç†å‘˜æŸ¥çœ‹æ‰€æœ‰è®¢å•åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µã€ç­›é€‰ï¼‰
2. âœ… æŸ¥çœ‹è®¢å•è¯¦æƒ…
3. âœ… æ ¸é”€é—¨ç¥¨è®¢å•
4. âœ… å•†åŸè®¢å•å‘è´§ã€å®Œæˆ

---

## ğŸ“ æ•°æ®åº“å˜æ›´

### æ–°å¢è¡¨

```sql
CREATE TABLE user_address (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  user_id BIGINT NOT NULL,
  name VARCHAR(50) NOT NULL,
  phone VARCHAR(20) NOT NULL,
  province VARCHAR(50) NOT NULL,
  city VARCHAR(50) NOT NULL,
  district VARCHAR(50) NOT NULL,
  detail VARCHAR(200) NOT NULL,
  is_default TINYINT(1) DEFAULT 0,
  create_time DATETIME DEFAULT CURRENT_TIMESTAMP,
  update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  INDEX idx_user_id (user_id)
);
```

**ä½ç½®**: `shared-backend/src/main/resources/sql/schema.sql`

---

## ğŸš€ éƒ¨ç½²è¯´æ˜

### æœ¬åœ°å¼€å‘
```bash
# å¯åŠ¨åç«¯
cd shared-backend
mvn spring-boot:run

# å¯åŠ¨Cç«¯å‰ç«¯
cd frontend-a
npm run dev

# å¯åŠ¨Bç«¯å‰ç«¯
cd frontend-b
npm run dev
```

### Dockeréƒ¨ç½²
```bash
# ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up --build -d

# è®¿é—®åœ°å€
# Cç«¯: http://localhost:3000
# Bç«¯: http://localhost:3001
# åç«¯: http://localhost:8080
```

---

## ğŸ” æµ‹è¯•è´¦å·

### Cç«¯ç”¨æˆ·
- ç”¨æˆ·å: zhangsan
- å¯†ç : 123456
- æ”¯ä»˜å¯†ç : 123456

### Bç«¯ç®¡ç†å‘˜
- ç”¨æˆ·å: admin
- å¯†ç : 123456

---

## âœ¨ ç‰¹æ€§è¯´æ˜

### åœ°å€ç®¡ç†
- æ”¯æŒå¤šåœ°å€ç®¡ç†
- è‡ªåŠ¨å¤„ç†é»˜è®¤åœ°å€ï¼ˆè®¾ç½®æ–°é»˜è®¤æ—¶è‡ªåŠ¨å–æ¶ˆæ—§é»˜è®¤ï¼‰
- æƒé™éªŒè¯ï¼ˆåªèƒ½æ“ä½œè‡ªå·±çš„åœ°å€ï¼‰

### è®¢å•ç®¡ç†
- é—¨ç¥¨è®¢å•çŠ¶æ€æµè½¬ï¼šå¾…æ”¯ä»˜(0) â†’ å¾…ä½¿ç”¨(1) â†’ å·²ä½¿ç”¨(2)
- å•†åŸè®¢å•çŠ¶æ€æµè½¬ï¼šå¾…æ”¯ä»˜(0) â†’ å¾…å‘è´§(1) â†’ å·²å‘è´§(2) â†’ å·²å®Œæˆ(3)
- æ”¯æŒè®¢å•å–æ¶ˆï¼ˆä»…å¾…æ”¯ä»˜çŠ¶æ€ï¼‰
- æ”¯æŒè®¢å•æ ¸é”€ï¼ˆä»…å¾…ä½¿ç”¨çŠ¶æ€ï¼‰

### æ”¯ä»˜åŠŸèƒ½
- ç»Ÿä¸€æ”¯ä»˜æ¥å£
- ä½™é¢æ”¯ä»˜
- æ”¯ä»˜å¯†ç éªŒè¯
- è‡ªåŠ¨æ›´æ–°è®¢å•çŠ¶æ€

---

## ğŸ“Œ æ³¨æ„äº‹é¡¹

1. **ç”¨æˆ·è®¤è¯**: å½“å‰ä½¿ç”¨æ¨¡æ‹Ÿç”¨æˆ·IDï¼ˆuserId=1ï¼‰ï¼Œç”Ÿäº§ç¯å¢ƒéœ€è¦ä»JWT Tokenä¸­è·å–
2. **å¯†ç åŠ å¯†**: å½“å‰å¯†ç æ˜æ–‡å­˜å‚¨ï¼Œç”Ÿäº§ç¯å¢ƒéœ€è¦ä½¿ç”¨BCryptåŠ å¯†
3. **äº‹åŠ¡å¤„ç†**: æ”¯ä»˜ã€åº“å­˜æ‰£å‡ç­‰æ“ä½œéœ€è¦æ·»åŠ äº‹åŠ¡æ³¨è§£
4. **å¹¶å‘æ§åˆ¶**: åº“å­˜æ‰£å‡éœ€è¦æ·»åŠ ä¹è§‚é”æˆ–æ‚²è§‚é”
5. **æ•°æ®éªŒè¯**: éœ€è¦æ·»åŠ æ›´å®Œå–„çš„å‚æ•°æ ¡éªŒ

---

## ğŸ‰ å®ŒæˆçŠ¶æ€

**æ‰€æœ‰æ–‡æ¡£ä¸­åˆ—å‡ºçš„æ¥å£å·²å…¨éƒ¨å®ç°å¹¶è¿æ¥å®Œæˆï¼**

- âœ… 25ä¸ªæ¥å£å…¨éƒ¨å®ç°
- âœ… å‰åç«¯APIå®Œå…¨å¯¹æ¥
- âœ… æ•°æ®åº“è¡¨ç»“æ„å®Œæ•´
- âœ… ç¼–è¯‘æµ‹è¯•é€šè¿‡
- âœ… æ ¸å¿ƒåŠŸèƒ½éªŒè¯é€šè¿‡
