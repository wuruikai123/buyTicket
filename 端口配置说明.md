# ç«¯å£é…ç½®è¯´æ˜

## ğŸ“‹ ç«¯å£åˆ†é…

| æœåŠ¡ | ç«¯å£ | è®¿é—®åœ°å€ | è¯´æ˜ |
|------|------|---------|------|
| **åç«¯æœåŠ¡** | 8082 | http://localhost:8082 | Spring Boot API |
| **ç”¨æˆ·ç«¯ (Aç«¯)** | 3000 | http://localhost:3000 | ç”¨æˆ·è´­ç¥¨ç³»ç»Ÿ |
| **ç®¡ç†ç«¯ (Bç«¯)** | 3001 | http://localhost:3001 | ç®¡ç†åå° |
| **å–å®¶ç«¯ (Cç«¯)** | 3002 | http://localhost:3002 | æ ¸é”€ç³»ç»Ÿ |
| **MySQL** | 3307 | localhost:3307 | æ•°æ®åº“ |

---

## ğŸ”§ é…ç½®æ–‡ä»¶

### åç«¯é…ç½®
**æ–‡ä»¶**: `shared-backend/src/main/resources/application.properties`
```properties
server.port=8082
```

### å‰ç«¯é…ç½®

#### frontend-a (ç”¨æˆ·ç«¯)
**æ–‡ä»¶**: `frontend-a/vite.config.ts`
```typescript
server: {
  port: 3000,
  proxy: {
    '/api': {
      target: 'http://localhost:8082',
      changeOrigin: true
    }
  }
}
```

#### frontend-b (ç®¡ç†ç«¯)
**æ–‡ä»¶**: `frontend-b/vite.config.ts`
```typescript
server: {
  port: 3001,
  proxy: {
    '/api': {
      target: 'http://localhost:8082',
      changeOrigin: true
    }
  }
}
```

#### frontend-c (å–å®¶ç«¯)
**æ–‡ä»¶**: `frontend-c/vite.config.ts`
```typescript
server: {
  port: 3002,
  proxy: {
    '/api': {
      target: 'http://localhost:8082',
      changeOrigin: true
    }
  }
}
```

---

## ğŸš€ å¯åŠ¨æœåŠ¡

### æ–¹æ³• 1ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰
```bash
å¯åŠ¨æ‰€æœ‰æœåŠ¡.bat
```

### æ–¹æ³• 2ï¼šæ‰‹åŠ¨å¯åŠ¨

#### 1. å¯åŠ¨åç«¯
```bash
cd shared-backend
mvn spring-boot:run
```

#### 2. å¯åŠ¨å‰ç«¯
```bash
# ç”¨æˆ·ç«¯
cd frontend-a
npm run dev

# ç®¡ç†ç«¯
cd frontend-b
npm run dev

# å–å®¶ç«¯
cd frontend-c
npm run dev
```

---

## âœ… éªŒè¯æœåŠ¡

### æ£€æŸ¥åç«¯
```bash
curl http://localhost:8082/api/v1/banner/list
```

### æ£€æŸ¥å‰ç«¯
- ç”¨æˆ·ç«¯: http://localhost:3000
- ç®¡ç†ç«¯: http://localhost:3001
- å–å®¶ç«¯: http://localhost:3002

---

## ğŸ› å¸¸è§é—®é¢˜

### é—®é¢˜ 1ï¼šç«¯å£è¢«å ç”¨
```
Error: listen EADDRINUSE: address already in use :::8082
```

**è§£å†³æ–¹æ³•**ï¼š
```bash
# Windows
netstat -ano | findstr :8082
taskkill /PID <è¿›ç¨‹ID> /F

# æˆ–è€…ä¿®æ”¹ç«¯å£
```

### é—®é¢˜ 2ï¼šå‰ç«¯æ— æ³•è¿æ¥åç«¯
```
http proxy error: /api/xxx ECONNREFUSED
```

**åŸå› **ï¼šåç«¯æœåŠ¡æœªå¯åŠ¨

**è§£å†³æ–¹æ³•**ï¼š
1. æ£€æŸ¥åç«¯æ˜¯å¦è¿è¡Œåœ¨ 8082 ç«¯å£
2. æ£€æŸ¥ vite.config.ts ä¸­çš„ proxy é…ç½®æ˜¯å¦æ­£ç¡®

### é—®é¢˜ 3ï¼šè·¨åŸŸé—®é¢˜
**è§£å†³æ–¹æ³•**ï¼šå·²åœ¨ vite.config.ts ä¸­é…ç½® `changeOrigin: true`

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **åç«¯å¿…é¡»å…ˆå¯åŠ¨**ï¼Œå‰ç«¯æ‰èƒ½æ­£å¸¸å·¥ä½œ
2. **ç«¯å£ä¸è¦å†²çª**ï¼Œç¡®ä¿ 3000ã€3001ã€3002ã€8082 ç«¯å£æœªè¢«å ç”¨
3. **æ”¯ä»˜åŠŸèƒ½éœ€è¦å†…ç½‘ç©¿é€**ï¼Œnatapp åœ°å€é…ç½®åœ¨ `AlipayConfig.java`
4. **æ•°æ®åº“å¿…é¡»è¿è¡Œ**ï¼Œç«¯å£ 3307

---

## ğŸ”„ ä¿®æ”¹ç«¯å£

å¦‚æœéœ€è¦ä¿®æ”¹ç«¯å£ï¼Œéœ€è¦åŒæ­¥ä¿®æ”¹ä»¥ä¸‹æ–‡ä»¶ï¼š

### ä¿®æ”¹åç«¯ç«¯å£ï¼ˆä¾‹å¦‚æ”¹ä¸º 8080ï¼‰
1. `shared-backend/src/main/resources/application.properties`
   ```properties
   server.port=8080
   ```

2. æ‰€æœ‰å‰ç«¯çš„ `vite.config.ts`
   ```typescript
   proxy: {
     '/api': {
       target: 'http://localhost:8080',  // æ”¹ä¸ºæ–°ç«¯å£
       changeOrigin: true
     }
   }
   ```

3. `å¯åŠ¨æ‰€æœ‰æœåŠ¡.bat` ä¸­çš„ç«¯å£æ£€æŸ¥

### ä¿®æ”¹å‰ç«¯ç«¯å£
åªéœ€ä¿®æ”¹å¯¹åº”çš„ `vite.config.ts`:
```typescript
server: {
  port: æ–°ç«¯å£å·,
  // ...
}
```
